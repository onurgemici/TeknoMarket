@model IEnumerable<ProductListResponse>
@{
    ViewData["Title"] = "Home Page";
    var carouselImages = ViewBag.CarouselImages as IList<TeknoMarketData.CarouselImage> ?? Enumerable.Empty<TeknoMarketData.CarouselImage>();
}

<style>
    #itemboxes {
        display: flex;
        justify-content: center;
        align-items: center;
    
        margin: 0;
    }

    .item-box {
        background-color: #f8f9fa; /* Grey background color */
        box-shadow: 0 0 10px rgba(0, 0, 0, 0.3); /* Dark shadow */
        margin-bottom: 20px;
        padding: 20px;
        max-width: 21rem;
        max-height:30rem;
        min-height: 30rem;
        display: flex;
        flex-direction: column;
        justify-content: center;
        align-items: center;
    }

    .item-image {
        max-width: 100%;
        height: auto;
    
    }

    .carousel{
        box-shadow: 10px 10px 15px rgba(0, 0, 0, 0.3); /* Dark shadow */
    }
</style>

@if (carouselImages.Any())
{
    <div id="carouselExampleAutoplaying" class="carousel slide" data-bs-ride="carousel">
        <div class="carousel-inner">

            @foreach (var carouselImage in carouselImages)
            {
                var isFirst = carouselImages.First() == carouselImage;
                <div class="carousel-item @(isFirst ? "active" : "")">
                    <img src="@carouselImage.Image" class="d-block w-100" alt="TeknoMarket">
                </div>
            }

        </div>
        <button class="carousel-control-prev" type="button" data-bs-target="#carouselExampleAutoplaying" data-bs-slide="prev">
            <span class="carousel-control-prev-icon" aria-hidden="true"></span>
            <span class="visually-hidden">Previous</span>
        </button>
        <button class="carousel-control-next" type="button" data-bs-target="#carouselExampleAutoplaying" data-bs-slide="next">
            <span class="carousel-control-next-icon" aria-hidden="true"></span>
            <span class="visually-hidden">Next</span>
        </button>
    </div>
}

else
{
    <p>No carousel images available.</p>
}


<hr />

<div id="itemboxes" class="container mt-4">
    <section class="row">
        @foreach (var product in Model)
        {
            <div class="col-md-4">
                <div class="item-box">
                    <img src="@product.Image" alt="Item Image" class="item-image">
                    <h5>@product.Name</h5>
                    @if (product.DiscountRate > 0)
                    {
                        <p class="text-success fs-4">%@product.DiscountRate</p>
                    }
                    else
                    {
                        <p class="text-muted fs-4">-</p>
                    }


                    <p class="text-dark fs-4">@product.DiscountedPrice.ToString("c2")</p>
                    <a asp-action="Product" class="btn btn-primary" asp-route-id="@product.Id">Add to Basket</a>
                </div>
            </div>
        }
    </section>
</div>
<hr />